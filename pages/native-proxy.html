<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Native Proxy JS Reactivity</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>Native Proxy JS Reactivity</h1>
  <a href="/">go back</a>
  <div>
    <h3>
      Counter
    </h3>
    <p>Counter value: <span id="counter"></span></p>
    <button id="sub"> -1 </button>
    <button id="add"> +1 </button>
  </div>

  <script type="module">
    const counterHtml = document.getElementById('counter')
    const proxyHandler = {
      set(target, key, value) {
        Reflect.set(...arguments)
        if (key === 'value') updateText()
        return true
      }
    }

    let counter = new Proxy(
      { 
        value: 0,
      },
      proxyHandler
    )

    const add = document.getElementById('add')
    const sub = document.getElementById('sub')

    add.addEventListener('click', () => counter.value++)

    sub.addEventListener('click',  () => counter.value--)

    function updateText() {
      counterHtml.innerText = counter.value
    } 
    // mounted
    updateText()
  </script>

  <div class="code">
const counterHtml = document.getElementById('counter')
const proxyHandler = {
  set(target, key, value) {
    Reflect.set(...arguments)
    if (key === 'value') updateText()
    return true
  }
}

let counter = new Proxy(
  { 
    value: 0,
  },
  proxyHandler
)

const add = document.getElementById('add')
const sub = document.getElementById('sub')

add.addEventListener('click', () => counter.value++)

sub.addEventListener('click',  () => counter.value--)

function updateText() {
  counterHtml.innerText = counter.value
} 
// mounted
updateText()
  </div>
</body>
</html>
